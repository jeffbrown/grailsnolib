usePlugin 'groovy'

version = '1.2-SNAPSHOT'


lib = "lib"
configurations {
    jsp21.extendsFrom compile
}

dependencies {
    compile files(
            fileSet(dir: lib, includes: ['*.jar'], excludes: ['jsp-api-2.1.jar']),
            "${System.getenv('JAVA_HOME')}/lib/tools.jar",
            "src/war"
    )

    jsp files("$lib/jsp-api-2.1.jar") 
}

source {
    main {
        groovy {
            srcDirs = ['src/java']
        }
        resources {
            srcDirs = ['src/java']
            include '**/*.properties', '**/*.xsd'
        }
    }
    jdk12 {
        compileClasspath(jsp21)
        groovy.srcDirs = ['src/jsp21']
        resources.srcDirs = []
    }
    buildScripts {
        classesDir = "$buildDir/compiled-scripts"
        groovy.srcDirs = ['scrips']
        resources.srcDirs = []
    }
}

manifest.mainAttributes(
        "Built-By": System.properties['user.name'],
        "Implementation-Title": "Gradle",
        "Implementation-Version": version,
        "Implementation-Vendor": 'grails.org')

metaInf << fileSet(dir:'src/jar', includes: ['*.handlers','*.schemas'])



task check << { println configurations.compile.files }